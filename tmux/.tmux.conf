######## BASIC SETTINGS ########

# tmuxèµ·å‹•æ™‚ã®ã‚·ã‚§ãƒ«ã‚’fishã«ã™ã‚‹
if "test (uname) = 'Darwin'" "set -g default-shell /usr/local/bin/fish"
if "test (uname) = 'Darwin'" "set -g default-command 'reattach-to-user-namespace -l fish'"
if "test (uname) = 'Linux'" "set -g default-shell /home/linuxbrew/.linuxbrew/bin/fish"
if "test (uname) = 'Linux'" "set -g default-command /home/linuxbrew/.linuxbrew/bin/fish"

# tmuxã‚’256è‰²è¡¨ç¤ºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹
# default-terminal: tmuxã‚’èµ·å‹•ã—ãŸçŠ¶æ…‹ã®fishã®$TERMã®å€¤
set -g default-terminal 'screen-256color'
# terminal-overrides: tmuxã‚’èµ·å‹•ã—ã¦ã„ãªã„çŠ¶æ…‹ã§ã®fishã§ã®$TERMã®å€¤
set -sa terminal-overrides ',*256col*:RGB'

set -g focus-events on

# tmuxä¸Šã§ã®ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆé€Ÿåº¦ã‚’ä¸Šã’ã‚‹
set -g escape-time 0

## ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1ã‹ã‚‰å§‹ã‚ã‚‹
set -g base-index 1
## ãƒšã‚¤ãƒ³ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’1ã‹ã‚‰å§‹ã‚ã‚‹
setw -g pane-base-index 1

# è¨­å®šãƒªãƒ­ãƒ¼ãƒ‰
bind r source-file ~/.tmux.conf

# ãƒã‚¦ã‚¹æ“ä½œã‚’æœ‰åŠ¹ã«ã™ã‚‹
set -g mouse on
bind -n WheelUpPane   select-pane -t= \; copy-mode -e \; send-keys -M
bind -n WheelDownPane select-pane -t= \;                 send-keys -M

# Scrollback Limit
set -g history-limit 10000

######## KEYBINDINGS ########

# prefixã‚­ãƒ¼ã‚’C-fã«å¤‰æ›´
set -g prefix C-f

# C-bã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’è§£é™¤
unbind C-b

# Ctrl + çŸ¢å°ã§ãƒšã‚¤ãƒ³ç§»å‹•
bind -n C-h select-pane -L
bind -n C-j select-pane -D
bind -n C-k select-pane -U
bind -n C-l select-pane -R

# windowã®åˆ‡ã‚Šæ›¿ãˆ
bind -n S-Left select-window -t :-
bind -n S-Right select-window -t :+

# windowã®ä¸¦ã³æ›¿ãˆ
bind -r j swap-window -t -1
bind -r l swap-window -t +1

# vimã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ãƒšã‚¤ãƒ³ã‚’ãƒªã‚µã‚¤ã‚ºã™ã‚‹
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# h ã§ãƒšã‚¤ãƒ³ã‚’ç¸¦åˆ†å‰²ã™ã‚‹
bind h split-window -h -c '#{pane_current_path}'

# y ã§ãƒšã‚¤ãƒ³ã‚’ç¸¦åˆ†å‰²ã™ã‚‹
bind y split-window -v -c '#{pane_current_path}'

# Open lazygit in tmux popup window
bind -n C-n run-shell 'tmux popup -E -w90% -h90% -d #{pane_current_path} lazygit || exit'
# Open lazydocker in tmux popup window
bind -n C-s run-shell 'tmux popup -E -w91% -h90% -d #{pane_current_path} lazydocker || exit'

# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹
# ã‚³ãƒ”ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã§vimã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ã†
setw -g mode-keys vi

# 'v' ã§é¸æŠã‚’å§‹ã‚ã‚‹
bind -T copy-mode-vi v send -X begin-selection

# 'V' ã§è¡Œé¸æŠ
bind -T copy-mode-vi V send -X select-line

# 'C-v' ã§çŸ©å½¢é¸æŠ
bind -T copy-mode-vi C-v send -X rectangle-toggle

# 'y' ã§ãƒ¤ãƒ³ã‚¯
bind -T copy-mode-vi y send -X copy-selection

# 'Y' ã§è¡Œãƒ¤ãƒ³ã‚¯
bind -T copy-mode-vi Y send -X copy-line

# 'C-p'ã§ãƒšãƒ¼ã‚¹ãƒˆ
bind-key C-p paste-buffer



######## status bar ########

# tmux plugins
set -g @tmux_power_theme 'sky'

# ç”·æ€§æŠ€è¡“ã®çµµæ–‡å­—
set -g @tmux_power_user_icon 'ğŸ‘¨â€ğŸ’»'
# set -g @tmux_power_user_icon 'User:'

# ã“ã‚Œã¯1ç•ªæœ€å¾Œã«æ›¸ãå¿…è¦ãŒã‚ã‚‹
run '~/dotfiles/tmux/.tmux/plugins/tmux-power/tmux-power.tmux'

######## COLORS ########

# pane border
set -g pane-border-style fg=colour230 #base02
set -g pane-active-border-style fg=colour230,bg=colour244
